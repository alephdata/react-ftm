<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Semantics</title>
  <script>
    process = {env:{}};
    window.cryptoBrowserify = {}
  </script>
  <style>

    .vertex > .label{
      display: none;
    }
    .vertex:hover > .label{
      display: initial;
    }
  </style>
  <script type="module">
    import {  Layout, Graph, React, ReactDOM, Vertex, Edge, Model } from '../dist/vis2.es5.js';
    import {data} from './resources/az_alievs.js'
    import {schemata} from './resources/_schemata.js'

    const model = new Model(schemata)
    function useGraph(){
      const [graph, setGraph] = React.useState(new Graph());
      const metaSetGraph = function(){
        setGraph({...graph});
      }
      return [graph, metaSetGraph, function (){
        graph.addVertex(new Vertex('12','12','12'+Math.random()));
        if(graph.vertices.length-1){
          graph.addEdge(new Edge(graph.vertices[0], graph.vertices[graph.vertices.length-1], '123'+Math.random()))
        }
        metaSetGraph(graph);
      }]
    }
    function App(){
      const [graph, setGraph, addVertex] = useGraph();
      const [count, setCount] =  React.useState(1);
      return React.createElement('div', null,
        React.createElement('div', null,
          React.createElement('button', { onClick:()=> Array.from({length:count}).forEach(addVertex)}, 'addVertex'),
          React.createElement('input', { value:count, onChange:({target})=>{
              setCount(target.value)
            } }
          ),
          React.createElement('button',{
            onClick:()=>{
                data
                  // .slice(0,3)
                  .map(rawEntity=>  model.getEntity(rawEntity))
                  .forEach(graph.addEntity, graph)
              setGraph(graph)

            }
          },'add our friends')
        ),
        React.createElement('div', null,
          React.createElement(Layout, {graph})
        )
      )
    }

    ReactDOM.render( React.createElement(App), document.querySelector('#app') )


  </script>
</head>
<body>
<div id="app"></div>
</body>
</html>
