<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Semantics</title>
  <script>
    process = {env:{}};
  </script>
  <style>

    .vertex > .label{
      display: none;
    }
    .vertex:hover > .label{
      /*display: initial;*/
    }
  </style>
  <script type="module">
    import {  Layout, Graph, React, ReactDOM, Vertex, Pan,Viewport, Point, Edge, Model, defaultModel } from '../dist/vis2.es5.js';
    import { data } from './resources/az_alievs.js'
    const model = new Model(defaultModel)
    const ggraph = new Graph()
    function useGraph(){
      const [graph, setGraph] = React.useState(ggraph);
      return [graph, setGraph, function (){
        graph.addVertex(new Vertex('12','12','12'+Math.random()));
        // if(graph.vertices.length-1){
          // graph.addEdge(new Edge(graph.vertices[0], graph.vertices[graph.vertices.size-1], '123'+Math.random()))
        // }
        // setGraph(graph);
      }]
    }
    function App(){
      const [graph, setGraph, addVertex] = useGraph();
      const [count, setCount] =  React.useState(1);
      const [X, setX] = React.useState(0);
      const [Y, setY] = React.useState(0);
      const [zoom, setZoom] = React.useState(0);
      return React.createElement('div', null,
        React.createElement('div', null,
          React.createElement('button', { onClick:()=> Array.from({length:count}).forEach(addVertex)}, 'addVertex'),
          React.createElement('input', { value:count, onChange:({target})=>{
              setCount(target.value)
            } }
          ),
          React.createElement('button',{
            onClick:()=>{
                data
                  // .slice(0,3)
                  .map(rawEntity=>  model.getEntity(rawEntity))
                  .forEach(graph.addEntity, graph)
              // setGraph(graph)

            }
          },'add our friends')
        ),
        React.createElement('div', null,
          React.createElement('label', null,
            React.createElement('span',null,'X:'),
            React.createElement('input', { type:'range', min:-500 , max:500, value:X,onChange:({target})=>{
                setX(target.value)
              } }
            ),
          ),
          React.createElement('label', null,
            React.createElement('span',null,'Y:'),
            React.createElement('input', {
              type:'range', value:Y, min:-500 , max:500,
              onChange:({target})=>{
                setY(target.value)
              } }
            ),
          ),
          React.createElement('label', null,
            React.createElement('span',null,'Zoom:'),
            React.createElement('input', { type:'range', value:zoom, min:0, max:500, onChange:({target})=>{
                setZoom(target.value)
              } }
            ),
          ),
        ),
        React.createElement('div', null,
          React.createElement(Pan, {
            zoomFactor: zoom,
            children:(panCenter, zoomFactor) => React.createElement(Viewport, {zoomFactor, panCenter},
              React.createElement(Layout, {graph})
            )
          })
        )
      )
    }

    ReactDOM.render( React.createElement(App), document.querySelector('#app') )
    window.w={Layout, Graph, React, ReactDOM, Vertex, Edge, Model, defaultModel, graph:ggraph, model };


  </script>
</head>
<body>
<div id="app"></div>
</body>
</html>
