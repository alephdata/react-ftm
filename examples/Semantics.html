<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Semantics</title>
  <script type="module">
    import { Vis2, Vertex, Edge, EntityVertex, LabeledEdge } from '../dist/vis2.es5.js'
    import { schemata } from './resources/_schemata.js'
    import { data } from './resources/az_alievs.js'

    const graph = new Vis2({
      container: document.getElementById('#app'),
      schemata
    })


    const [node1, node2, ...rest] = Array.from({ length: 10 })
      .map(() => new Vertex())

    graph.layout.addNodes(
      ...[node1, node2, ...rest]
    )



    graph.layout
      .addLink(new Edge({
        source: node1,
        target: node2
      }))

    const davit = graph.model.emitEntity({
      schema: 'Person',
      properties: {
        name: ['Davit']
      }
    })

    graph.layout.addNode(
      new EntityVertex(davit)
    )

    data
      .map(entityDatum => graph.model.emitEntity(entityDatum))
      .filter(entity => entity.schema.isA('Thing'))
      .forEach(entity => graph.layout.addNode(
        new EntityVertex(entity)
      ))

    data
      .map(entityDatum => graph.model.emitEntity(entityDatum))
      .filter(entity => entity.schema.isA('Interval'))
      .forEach(entity => {
        const {
          source,
          target,
        } = entity.getEdge()

        graph.layout.addLink(
          new LabeledEdge({
            label:entity.schema.getLabel({}),
            source: source.values[0],
            target: target.values[0]
          })
        )
        }
      )


  </script>
</head>
<body>
<div id="#app"></div>
</body>
</html>
